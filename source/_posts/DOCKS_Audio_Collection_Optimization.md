title: DOCKS中对声音采集部分的优化
date: 2015-08-30 10:35:40
categories: Technique
tags: [ DOCKS, NLP ]
---

# DOCKS中对声音采集部分的优化
---
从目前来看，DOCKS中声音采集存在3点瑕疵：
1. 断句识别不理想。
具体场景为：有些时候会有一些比较长的语句，中间有断句。当在断句部分稍作停顿时，程序就会认为声音已采集结束。
2. 噪音环境下的识别。
在噪音下的测试基本没法完成。

# 针对断句识别部分的优化
---
1. DOCKS中原先的对数据采集部分的处理
DOCKS中的数据输入检测部分的核心仍是依赖于Sphinx的前端。通过Sphinx的Frontend的getData()方法可以从音频流获取到数据。当然，Sphinx内部有一定的标准，用于识别录音开始和结束。不过在这部分，由于作者用的是去年的Sphinx的类库，与我现今看到的Sphinx最新的源码已经有所不同，有些参数我也不理解什么意思。
2. 该方法存在的问题
**以下所说的“问题”仅仅存在于有断句的场景下**，如果不考虑断句（或者native Speaker确实语速较快，断句时间也相对较短），那么DOCKS的采集方法无可厚非的。

在断句间隔比较大的情况下，则会出现只录入前半句的情况。为了避免这个问题的存在，我所采用的方法是在识别结束后不立即进行识别，而是让线程休眠10ms，再识别一次。如果用DOCKS本身的语音采集的方法，则会出现以下情况：DOCKS又继续等待输入，被阻塞。如果事实上本身就没有断句，遇到这种情况就出问题了。

为了避免这个问题，我的方法是让getData在阻塞一段时间后如果仍然没有输入就退出，把read函数返回0。实现这一技术，需要用到java中的future类以及线程池的概念。结合这两者，可以让一个方法在限定的时间内退出。
3. 源码目录
https://github.com/sulxxy/docks/blob/master/src/Frontend/VoiceActivityDetector.java

# 针对噪音部分的优化
---
这部分暂时还没优化。

